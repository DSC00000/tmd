

<!DOCTYPE HTML>
<!--
	Landed by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en">
	<head>
		<title>Texas Machine Design</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>               
	</head>


	<body class="is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<header id="header">
					<h1 id="logo"><a href="index.html">TMD</a></h1>
					<nav id="nav">
						<ul>
							<li><a href="index.html">Home</a></li>
							<li><a href="about.html">About Us</a></li>
							<li>
								<a href="#">Models</a>
									<ul>
										<li>
											<!-- <a href="#">Models</a> -->
											<a href="lpx.html">LPX</a>
											<a href="rpx.html">RPX</a>
											<a href="sbx.html">SBX</a>
											<a href="autosaw.html">AutoSaw</a>
										</li>
									</ul>
							</li>
							<li><a href="https://texasmachinedesign.zendesk.com">Support</a></li>
							<li><a href="#five" class="button primary scrolly">Contact</a></li>
						</ul>
					</nav>
				</header>

			<!-- Main -->
				<div id="main" class="wrapper style1">
					
                    <div class="container">
						<div class="content">
							<header>
								<h2><strong>Machine Production Metrics</strong></h2>
							</header>
						</div>
                            <div class="box alt">
                                <!-- <form id="serialForm" class="cta" method="post" onSubmit="submit">
                                    <div class="col-8 col-12-xsmall pad1">
                                        <input type="text" class="form-control" id="serial" name="serial" placeholder="Machine Serial" required>
                                    </div>
                                    
                                </form> -->

								<div class="gtr col-8 col-12-xsmall mar1">
									<input type="submit" id="getData" class="btn btn-primary"/>
								</div>
                            </div>
                    </div>

                    <div class="container">
                        <table class="table table-striped" id="dataTable">
                            <thead>
                                <tr>
                                <th>Machine Serial:</th>
								<th>Hours On:</th>
                                <th>Hours Running Product:</th>
                                <th>Louver Count:</th>
                                <th>Louvers Drilled:</th>
								<th>Louvers Notched:</th>
                                <th>Louvers Pinned:</th>
                                <th>Louvers Stapled to Tilt Rod:</th>
								<th>Stile Count:</th>
								<th>Stile Total Linear Feet:</th>
                                </tr>
                            </thead>

                            <tbody>

                            </tbody>
                        </table>
                    </div>

				</div>
			
			<!-- Five -->
				<section id="five" class="wrapper style2 special fade">
					<div class="container">
						<header>
							<h2>Any question, any time.</h2>
						</header>
						<div class="box alt">
							<form class="cta" method="post" data-netlify="true" onSubmit="submit">
								<div class="col-8 col-12-xsmall pad1">
									<input type="text" class="form-control" id="name" name="name" placeholder="Name" required>
								</div>
								<div class="col-8 col-12-xsmall pad1">
									<input type="email" class="form-control" id="email" name="email" placeholder="Email" required>
								</div>
								<div class="col-8 col-12-xsmall pad1">
									<input type="text" class="form-control" id="subject" name="subject" placeholder="Subject" required>
								</div>
								<div class="col-8 col-12-xsmall pad1">
									<textarea class="form-control" id="message" name="message" placeholder="Your Message" required></textarea>
								</div>
								<div class="gtr col-8 col-12-xsmall mar1">
									<input type="submit" value="Contact Us" class="button primary"/>
								</div>
							</form>
						</div>
					</div>
				</section>

		<!-- Footer -->
			<footer id="footer">
				<ul class="icons">
					<li><a href="https://www.facebook.com/texasmachinedesign" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
					<!-- <li><a href="#" class="icon brands alt fa-linkedin-in"><span class="label">LinkedIn</span></a></li> -->
					<li><a href="https://twitch.tv/texasmachinedesign" class="icon brands alt fa-twitch"><span class="label">Twitch</span></a></li>
					<li><a href="mailto:info@texasmachinedesign.com" class="icon solid alt fa-envelope"><span class="label">Email</span></a></li>
				</ul>
				<ul class="copyright">
					<li>&copy; TMD, LLC. All rights reserved. +1.512.772.4411</li><li>Design: <a href="http://html5up.net">HTML5 UP</a> and <a href="https://rubrnek.netlify.app">RUBRNEK</a></li>
				</ul>
			</footer>

		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
		<!-- JS Script to grab Firebase data -->
            <script type="module">         
                import { initializeApp } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-app.js";
                import { getDatabase, ref, child, onValue } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-database.js";
                      
                const firebaseConfig = {						//Firebase App Data required for API
                  apiKey: "AIzaSyCYsOexRfQS1eCKXf4UXasY1N8HQ-ckWF0",
                  authDomain: "telemetry-upload.firebaseapp.com",
                  databaseURL: "https://telemetry-upload-default-rtdb.firebaseio.com",
                  projectId: "telemetry-upload",
                  storageBucket: "telemetry-upload.appspot.com",
                  messagingSenderId: "56055561946",
                  appId: "1:56055561946:web:9c0ace75c3352ac0df6fe3",
                  measurementId: "G-T3VQ6Q4R3M"
                };
				
                const app = initializeApp(firebaseConfig);		//Standard database initialization
                const database = getDatabase(app)
				
                getData.addEventListener('click',(e) => {		//Start the script on click for query button
                    $('#dataTable td').remove();

                    const dbRef = ref(database, `production/`);	//Look specifically at the production collection in the DB

                    onValue(dbRef, (snapshot) => {				//Go through each production child and assign it to a single variable
                        snapshot.forEach((childSnapshot) => {
                            const childKey = childSnapshot.key;
                            const childData = childSnapshot.val();

                            var row = "<tr><td>"    + childData.Machine_Serial                        	+ "</td><td>"
                                                    + childData.Lifetime_Hours_On                     	+ "</td><td>"
                                                    + childData.Lifetime_Hours_Running_Product        	+ "</td><td>"
                                                    + childData.Lifetime_Louver_Count                 	+ "</td><td>"
                                                    + childData.Lifetime_Louvers_Drilled              	+ "</td><td>"
                                                    + childData.Lifetime_Louvers_Notched              	+ "</td><td>"
                                                    + childData.Lifetime_Louvers_Pinned               	+ "</td><td>"
                                                    + childData.Lifetime_Louvers_Stapled_to_Tilt_Rod  	+ "</td><td>"
													+ childData.Lifetime_Stile_Count 					+ "</td><td>"
													+ childData.Lifetime_Stile_Linear_Feet 				+ "</td></tr>";
                            
                            $(row).appendTo(dataTable)    		//Take the child variable and stick in the HTML table                        
                        });
                    }, {onlyOnce: true});						//Do the above one time
                });
            </script>

	</body>
</html>